@page "/profile"
@inject Blazored.LocalStorage.ILocalStorageService localStore
@using Core.Models
@using System.Text.Json

<PageTitle>Profile</PageTitle>

<h1>My Profile</h1>
@if (user != null)
{
    <p id="name-of-user">Username: @user.Username</p>
    <p id="email-of-user">Email: @user.Email</p>
    @if (user.Role == "Admin")
    {
        <p id="role-display-if-admin">Special Role: @user.Role</p>
    }
}
else
{
    <p>Please log in to view your profile.</p>
}

<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Egne annoncer</th>
            <th scope="col">Vare</th>
            <th scope="col">Pris</th>
            <th scope="col">Status</th>
            <th scope="col">Slet</th>
        </tr>
    </thead>
</table>

@code {
    private User? user;

    protected override async Task OnInitializedAsync()
    {
        var userInfoJson = await localStore.GetItemAsStringAsync("userinfo");
        if (!string.IsNullOrEmpty(userInfoJson))
        {
            user = JsonSerializer.Deserialize<User>(userInfoJson);
        }
    }
}